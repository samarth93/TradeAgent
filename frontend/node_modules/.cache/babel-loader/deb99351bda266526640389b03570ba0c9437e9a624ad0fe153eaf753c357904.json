{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Row,Col,Card,Table,Badge,Alert,Spinner}from'react-bootstrap';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TransactionHistory=()=>{const[transactions,setTransactions]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{fetchTransactions();},[]);const fetchTransactions=async()=>{try{setLoading(true);const token=localStorage.getItem('token');const response=await axios.get('/api/trades/history',{headers:{Authorization:\"Bearer \".concat(token)}});setTransactions(response.data.transactions||[]);}catch(error){setError('Failed to load transaction history');console.error('Transactions fetch error:',error);}finally{setLoading(false);}};const formatDate=dateString=>{return new Date(dateString).toLocaleString();};if(loading){return/*#__PURE__*/_jsx(Container,{className:\"d-flex justify-content-center align-items-center\",style:{minHeight:'400px'},children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\",variant:\"primary\"})});}if(error){return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error})});}return/*#__PURE__*/_jsx(Container,{fluid:true,children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-4\",children:\"Transaction History\"}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"All Transactions\"})}),/*#__PURE__*/_jsx(Card.Body,{children:transactions.length>0?/*#__PURE__*/_jsxs(Table,{responsive:true,striped:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Symbol\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Company\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price per Share\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total Amount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:transactions.map(transaction=>{var _transaction$pricePer,_transaction$totalAmo;return/*#__PURE__*/_jsxs(\"tr\",{className:transaction.type==='BUY'?'buy-transaction':'sell-transaction',children:[/*#__PURE__*/_jsx(\"td\",{children:formatDate(transaction.transactionDate)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Badge,{bg:transaction.type==='BUY'?'success':'danger',children:transaction.type})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:transaction.stockSymbol})}),/*#__PURE__*/_jsx(\"td\",{children:transaction.stockName}),/*#__PURE__*/_jsx(\"td\",{children:transaction.quantity}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",(_transaction$pricePer=transaction.pricePerShare)===null||_transaction$pricePer===void 0?void 0:_transaction$pricePer.toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",(_transaction$totalAmo=transaction.totalAmount)===null||_transaction$totalAmo===void 0?void 0:_transaction$totalAmo.toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Badge,{bg:\"success\",children:\"Completed\"})})]},transaction.id);})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"No transactions yet.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Start trading to see your transaction history!\"})]})})]}),transactions.length>0&&/*#__PURE__*/_jsxs(Row,{className:\"mt-4\",children:[/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Total Transactions\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-primary\",children:transactions.length})]})})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Buy Orders\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-success\",children:transactions.filter(t=>t.type==='BUY').length})]})})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Sell Orders\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-danger\",children:transactions.filter(t=>t.type==='SELL').length})]})})})]})]})})});};export default TransactionHistory;","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Card","Table","Badge","Alert","Spinner","axios","jsx","_jsx","jsxs","_jsxs","TransactionHistory","transactions","setTransactions","loading","setLoading","error","setError","fetchTransactions","token","localStorage","getItem","response","get","headers","Authorization","concat","data","console","formatDate","dateString","Date","toLocaleString","className","style","minHeight","children","animation","variant","fluid","Header","Body","length","responsive","striped","hover","map","transaction","_transaction$pricePer","_transaction$totalAmo","type","transactionDate","bg","stockSymbol","stockName","quantity","pricePerShare","toFixed","totalAmount","id","md","filter","t"],"sources":["/home/samarth/Desktop/TradeAgent/frontend/src/components/TransactionHistory.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Row, Col, Card, Table, Badge, Alert, Spinner } from 'react-bootstrap';\nimport axios from 'axios';\n\nconst TransactionHistory = () => {\n  const [transactions, setTransactions] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    fetchTransactions();\n  }, []);\n\n  const fetchTransactions = async () => {\n    try {\n      setLoading(true);\n      const token = localStorage.getItem('token');\n      const response = await axios.get('/api/trades/history', {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setTransactions(response.data.transactions || []);\n    } catch (error) {\n      setError('Failed to load transaction history');\n      console.error('Transactions fetch error:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const formatDate = (dateString) => {\n    return new Date(dateString).toLocaleString();\n  };\n\n  if (loading) {\n    return (\n      <Container className=\"d-flex justify-content-center align-items-center\" style={{ minHeight: '400px' }}>\n        <Spinner animation=\"border\" variant=\"primary\" />\n      </Container>\n    );\n  }\n\n  if (error) {\n    return (\n      <Container>\n        <Alert variant=\"danger\">{error}</Alert>\n      </Container>\n    );\n  }\n\n  return (\n    <Container fluid>\n      <Row>\n        <Col>\n          <h1 className=\"mb-4\">Transaction History</h1>\n          \n          <Card>\n            <Card.Header>\n              <h5 className=\"mb-0\">All Transactions</h5>\n            </Card.Header>\n            <Card.Body>\n              {transactions.length > 0 ? (\n                <Table responsive striped hover>\n                  <thead>\n                    <tr>\n                      <th>Date</th>\n                      <th>Type</th>\n                      <th>Symbol</th>\n                      <th>Company</th>\n                      <th>Quantity</th>\n                      <th>Price per Share</th>\n                      <th>Total Amount</th>\n                      <th>Status</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {transactions.map((transaction) => (\n                      <tr \n                        key={transaction.id}\n                        className={transaction.type === 'BUY' ? 'buy-transaction' : 'sell-transaction'}\n                      >\n                        <td>{formatDate(transaction.transactionDate)}</td>\n                        <td>\n                          <Badge \n                            bg={transaction.type === 'BUY' ? 'success' : 'danger'}\n                          >\n                            {transaction.type}\n                          </Badge>\n                        </td>\n                        <td><strong>{transaction.stockSymbol}</strong></td>\n                        <td>{transaction.stockName}</td>\n                        <td>{transaction.quantity}</td>\n                        <td>${transaction.pricePerShare?.toFixed(2)}</td>\n                        <td>${transaction.totalAmount?.toFixed(2)}</td>\n                        <td>\n                          <Badge bg=\"success\">Completed</Badge>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </Table>\n              ) : (\n                <div className=\"text-center py-4\">\n                  <p className=\"text-muted\">No transactions yet.</p>\n                  <p>Start trading to see your transaction history!</p>\n                </div>\n              )}\n            </Card.Body>\n          </Card>\n\n          {/* Summary Statistics */}\n          {transactions.length > 0 && (\n            <Row className=\"mt-4\">\n              <Col md={4}>\n                <Card>\n                  <Card.Body className=\"text-center\">\n                    <h5>Total Transactions</h5>\n                    <h3 className=\"text-primary\">{transactions.length}</h3>\n                  </Card.Body>\n                </Card>\n              </Col>\n              <Col md={4}>\n                <Card>\n                  <Card.Body className=\"text-center\">\n                    <h5>Buy Orders</h5>\n                    <h3 className=\"text-success\">\n                      {transactions.filter(t => t.type === 'BUY').length}\n                    </h3>\n                  </Card.Body>\n                </Card>\n              </Col>\n              <Col md={4}>\n                <Card>\n                  <Card.Body className=\"text-center\">\n                    <h5>Sell Orders</h5>\n                    <h3 className=\"text-danger\">\n                      {transactions.filter(t => t.type === 'SELL').length}\n                    </h3>\n                  </Card.Body>\n                </Card>\n              </Col>\n            </Row>\n          )}\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default TransactionHistory; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}