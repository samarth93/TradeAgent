{"ast":null,"code":"import React,{useState,useEffect,createContext,useContext}from'react';import{Routes,Route,Navigate}from'react-router-dom';import{ToastContainer}from'react-toastify';import Navigation from'./components/Navigation';import Login from'./components/Login';import Signup from'./components/Signup';import Dashboard from'./components/Dashboard';import Portfolio from'./components/Portfolio';import Trading from'./components/Trading';import TransactionHistory from'./components/TransactionHistory';import Profile from'./components/Profile';import AdminPanel from'./components/AdminPanel';import authService from'./services/authService';// Authentication Context\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export const useAuth=()=>{const context=useContext(AuthContext);if(!context){throw new Error('useAuth must be used within an AuthProvider');}return context;};function App(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const initializeAuth=async()=>{try{const token=localStorage.getItem('token');if(token){const userData=await authService.getCurrentUser();setUser(userData);}}catch(error){console.error('Auth initialization error:',error);localStorage.removeItem('token');}finally{setLoading(false);}};initializeAuth();},[]);const login=async credentials=>{try{const response=await authService.login(credentials);localStorage.setItem('token',response.token);setUser(response);return response;}catch(error){throw error;}};const logout=()=>{localStorage.removeItem('token');setUser(null);authService.logout();};const signup=async userData=>{try{const response=await authService.signup(userData);return response;}catch(error){throw error;}};const isAdmin=()=>{return user&&user.roles&&user.roles.some(role=>role==='ROLE_ADMIN');};const authValue={user,login,logout,signup,isAdmin,isAuthenticated:!!user};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center align-items-center\",style:{height:'100vh'},children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})});}return/*#__PURE__*/_jsx(AuthContext.Provider,{value:authValue,children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[user&&/*#__PURE__*/_jsx(Navigation,{}),/*#__PURE__*/_jsx(\"div\",{className:user?\"container-fluid mt-4\":\"\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:!user?/*#__PURE__*/_jsx(Login,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:!user?/*#__PURE__*/_jsx(Signup,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:user?/*#__PURE__*/_jsx(Dashboard,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/portfolio\",element:user?/*#__PURE__*/_jsx(Portfolio,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/trading\",element:user?/*#__PURE__*/_jsx(Trading,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/transactions\",element:user?/*#__PURE__*/_jsx(TransactionHistory,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:user?/*#__PURE__*/_jsx(Profile,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:user&&isAdmin()?/*#__PURE__*/_jsx(AdminPanel,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:user?\"/dashboard\":\"/login\"})})]})}),/*#__PURE__*/_jsx(ToastContainer,{position:\"top-right\",autoClose:5000,hideProgressBar:false,newestOnTop:false,closeOnClick:true,rtl:false,pauseOnFocusLoss:true,draggable:true,pauseOnHover:true})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","createContext","useContext","Routes","Route","Navigate","ToastContainer","Navigation","Login","Signup","Dashboard","Portfolio","Trading","TransactionHistory","Profile","AdminPanel","authService","jsx","_jsx","jsxs","_jsxs","AuthContext","useAuth","context","Error","App","user","setUser","loading","setLoading","initializeAuth","token","localStorage","getItem","userData","getCurrentUser","error","console","removeItem","login","credentials","response","setItem","logout","signup","isAdmin","roles","some","role","authValue","isAuthenticated","className","style","height","children","Provider","value","path","element","to","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover"],"sources":["/home/samarth/Desktop/TradeAgent/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, createContext, useContext } from 'react';\nimport { Routes, Route, Navigate } from 'react-router-dom';\nimport { ToastContainer } from 'react-toastify';\nimport Navigation from './components/Navigation';\nimport Login from './components/Login';\nimport Signup from './components/Signup';\nimport Dashboard from './components/Dashboard';\nimport Portfolio from './components/Portfolio';\nimport Trading from './components/Trading';\nimport TransactionHistory from './components/TransactionHistory';\nimport Profile from './components/Profile';\nimport AdminPanel from './components/AdminPanel';\nimport authService from './services/authService';\n\n// Authentication Context\nconst AuthContext = createContext();\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const initializeAuth = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        if (token) {\n          const userData = await authService.getCurrentUser();\n          setUser(userData);\n        }\n      } catch (error) {\n        console.error('Auth initialization error:', error);\n        localStorage.removeItem('token');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    initializeAuth();\n  }, []);\n\n  const login = async (credentials) => {\n    try {\n      const response = await authService.login(credentials);\n      localStorage.setItem('token', response.token);\n      setUser(response);\n      return response;\n    } catch (error) {\n      throw error;\n    }\n  };\n\n  const logout = () => {\n    localStorage.removeItem('token');\n    setUser(null);\n    authService.logout();\n  };\n\n  const signup = async (userData) => {\n    try {\n      const response = await authService.signup(userData);\n      return response;\n    } catch (error) {\n      throw error;\n    }\n  };\n\n  const isAdmin = () => {\n    return user && user.roles && user.roles.some(role => role === 'ROLE_ADMIN');\n  };\n\n  const authValue = {\n    user,\n    login,\n    logout,\n    signup,\n    isAdmin,\n    isAuthenticated: !!user\n  };\n\n  if (loading) {\n    return (\n      <div className=\"d-flex justify-content-center align-items-center\" style={{ height: '100vh' }}>\n        <div className=\"spinner-border text-primary\" role=\"status\">\n          <span className=\"visually-hidden\">Loading...</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <AuthContext.Provider value={authValue}>\n      <div className=\"App\">\n        {user && <Navigation />}\n        <div className={user ? \"container-fluid mt-4\" : \"\"}>\n          <Routes>\n            <Route \n              path=\"/login\" \n              element={!user ? <Login /> : <Navigate to=\"/dashboard\" />} \n            />\n            <Route \n              path=\"/signup\" \n              element={!user ? <Signup /> : <Navigate to=\"/dashboard\" />} \n            />\n            <Route \n              path=\"/dashboard\" \n              element={user ? <Dashboard /> : <Navigate to=\"/login\" />} \n            />\n            <Route \n              path=\"/portfolio\" \n              element={user ? <Portfolio /> : <Navigate to=\"/login\" />} \n            />\n            <Route \n              path=\"/trading\" \n              element={user ? <Trading /> : <Navigate to=\"/login\" />} \n            />\n            <Route \n              path=\"/transactions\" \n              element={user ? <TransactionHistory /> : <Navigate to=\"/login\" />} \n            />\n            <Route \n              path=\"/profile\" \n              element={user ? <Profile /> : <Navigate to=\"/login\" />} \n            />\n            <Route \n              path=\"/admin\" \n              element={user && isAdmin() ? <AdminPanel /> : <Navigate to=\"/dashboard\" />} \n            />\n            <Route \n              path=\"/\" \n              element={<Navigate to={user ? \"/dashboard\" : \"/login\"} />} \n            />\n          </Routes>\n        </div>\n        <ToastContainer\n          position=\"top-right\"\n          autoClose={5000}\n          hideProgressBar={false}\n          newestOnTop={false}\n          closeOnClick\n          rtl={false}\n          pauseOnFocusLoss\n          draggable\n          pauseOnHover\n        />\n      </div>\n    </AuthContext.Provider>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}