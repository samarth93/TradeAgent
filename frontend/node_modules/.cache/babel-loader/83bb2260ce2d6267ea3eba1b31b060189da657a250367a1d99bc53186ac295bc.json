{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Row,Col,Card,Table,Alert,Spinner}from'react-bootstrap';import{useAuth}from'../App';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Portfolio=()=>{var _user$balance;const[portfolio,setPortfolio]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const{user}=useAuth();useEffect(()=>{fetchPortfolio();},[]);const fetchPortfolio=async()=>{try{setLoading(true);const token=localStorage.getItem('token');const response=await axios.get('/api/portfolio',{headers:{Authorization:\"Bearer \".concat(token)}});setPortfolio(response.data);}catch(error){setError('Failed to load portfolio data');console.error('Portfolio fetch error:',error);}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(Container,{className:\"d-flex justify-content-center align-items-center\",style:{minHeight:'400px'},children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\",variant:\"primary\"})});}if(error){return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error})});}const calculateTotalValue=()=>{if(!(portfolio!==null&&portfolio!==void 0&&portfolio.holdings))return 0;return Object.entries(portfolio.holdings).reduce((total,_ref)=>{var _portfolio$averagePri;let[symbol,quantity]=_ref;const avgPrice=((_portfolio$averagePri=portfolio.averagePrices)===null||_portfolio$averagePri===void 0?void 0:_portfolio$averagePri[symbol])||0;return total+quantity*avgPrice;},0);};return/*#__PURE__*/_jsx(Container,{fluid:true,children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-4\",children:\"My Portfolio\"}),/*#__PURE__*/_jsxs(Row,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{className:\"portfolio-summary\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Cash Balance\"}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"$\",(user===null||user===void 0?void 0:(_user$balance=user.balance)===null||_user$balance===void 0?void 0:_user$balance.toLocaleString())||'0.00']})]})})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{className:\"portfolio-summary\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Portfolio Value\"}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"$\",calculateTotalValue().toLocaleString()]})]})})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{className:\"portfolio-summary\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Total Value\"}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"$\",(((user===null||user===void 0?void 0:user.balance)||0)+calculateTotalValue()).toLocaleString()]})]})})})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"Stock Holdings\"})}),/*#__PURE__*/_jsx(Card.Body,{children:portfolio!==null&&portfolio!==void 0&&portfolio.holdings&&Object.keys(portfolio.holdings).length>0?/*#__PURE__*/_jsxs(Table,{responsive:true,striped:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Symbol\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Avg. Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Current Value\"}),/*#__PURE__*/_jsx(\"th\",{children:\"P&L\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:Object.entries(portfolio.holdings).map(_ref2=>{var _portfolio$averagePri2;let[symbol,quantity]=_ref2;const avgPrice=((_portfolio$averagePri2=portfolio.averagePrices)===null||_portfolio$averagePri2===void 0?void 0:_portfolio$averagePri2[symbol])||0;const currentValue=quantity*avgPrice;const pnl=0;// Would need current market price to calculate\nreturn/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:symbol})}),/*#__PURE__*/_jsx(\"td\",{children:quantity}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",avgPrice.toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",currentValue.toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{className:pnl>=0?'text-success':'text-danger',children:[\"$\",pnl.toFixed(2)]})]},symbol);})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"No stock holdings yet.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Start trading to build your portfolio!\"})]})})]})]})})});};export default Portfolio;","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Card","Table","Alert","Spinner","useAuth","axios","jsx","_jsx","jsxs","_jsxs","Portfolio","_user$balance","portfolio","setPortfolio","loading","setLoading","error","setError","user","fetchPortfolio","token","localStorage","getItem","response","get","headers","Authorization","concat","data","console","className","style","minHeight","children","animation","variant","calculateTotalValue","holdings","Object","entries","reduce","total","_ref","_portfolio$averagePri","symbol","quantity","avgPrice","averagePrices","fluid","md","Body","balance","toLocaleString","Header","keys","length","responsive","striped","hover","map","_ref2","_portfolio$averagePri2","currentValue","pnl","toFixed"],"sources":["/home/samarth/Desktop/TradeAgent/frontend/src/components/Portfolio.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Row, Col, Card, Table, Alert, Spinner } from 'react-bootstrap';\nimport { useAuth } from '../App';\nimport axios from 'axios';\n\nconst Portfolio = () => {\n  const [portfolio, setPortfolio] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const { user } = useAuth();\n\n  useEffect(() => {\n    fetchPortfolio();\n  }, []);\n\n  const fetchPortfolio = async () => {\n    try {\n      setLoading(true);\n      const token = localStorage.getItem('token');\n      const response = await axios.get('/api/portfolio', {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setPortfolio(response.data);\n    } catch (error) {\n      setError('Failed to load portfolio data');\n      console.error('Portfolio fetch error:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <Container className=\"d-flex justify-content-center align-items-center\" style={{ minHeight: '400px' }}>\n        <Spinner animation=\"border\" variant=\"primary\" />\n      </Container>\n    );\n  }\n\n  if (error) {\n    return (\n      <Container>\n        <Alert variant=\"danger\">{error}</Alert>\n      </Container>\n    );\n  }\n\n  const calculateTotalValue = () => {\n    if (!portfolio?.holdings) return 0;\n    return Object.entries(portfolio.holdings).reduce((total, [symbol, quantity]) => {\n      const avgPrice = portfolio.averagePrices?.[symbol] || 0;\n      return total + (quantity * avgPrice);\n    }, 0);\n  };\n\n  return (\n    <Container fluid>\n      <Row>\n        <Col>\n          <h1 className=\"mb-4\">My Portfolio</h1>\n          \n          {/* Portfolio Summary */}\n          <Row className=\"mb-4\">\n            <Col md={4}>\n              <Card className=\"portfolio-summary\">\n                <Card.Body>\n                  <h5>Cash Balance</h5>\n                  <h3>${user?.balance?.toLocaleString() || '0.00'}</h3>\n                </Card.Body>\n              </Card>\n            </Col>\n            <Col md={4}>\n              <Card className=\"portfolio-summary\">\n                <Card.Body>\n                  <h5>Portfolio Value</h5>\n                  <h3>${calculateTotalValue().toLocaleString()}</h3>\n                </Card.Body>\n              </Card>\n            </Col>\n            <Col md={4}>\n              <Card className=\"portfolio-summary\">\n                <Card.Body>\n                  <h5>Total Value</h5>\n                  <h3>${((user?.balance || 0) + calculateTotalValue()).toLocaleString()}</h3>\n                </Card.Body>\n              </Card>\n            </Col>\n          </Row>\n\n          {/* Holdings Table */}\n          <Card>\n            <Card.Header>\n              <h5 className=\"mb-0\">Stock Holdings</h5>\n            </Card.Header>\n            <Card.Body>\n              {portfolio?.holdings && Object.keys(portfolio.holdings).length > 0 ? (\n                <Table responsive striped hover>\n                  <thead>\n                    <tr>\n                      <th>Symbol</th>\n                      <th>Quantity</th>\n                      <th>Avg. Price</th>\n                      <th>Current Value</th>\n                      <th>P&L</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {Object.entries(portfolio.holdings).map(([symbol, quantity]) => {\n                      const avgPrice = portfolio.averagePrices?.[symbol] || 0;\n                      const currentValue = quantity * avgPrice;\n                      const pnl = 0; // Would need current market price to calculate\n                      \n                      return (\n                        <tr key={symbol}>\n                          <td><strong>{symbol}</strong></td>\n                          <td>{quantity}</td>\n                          <td>${avgPrice.toFixed(2)}</td>\n                          <td>${currentValue.toFixed(2)}</td>\n                          <td className={pnl >= 0 ? 'text-success' : 'text-danger'}>\n                            ${pnl.toFixed(2)}\n                          </td>\n                        </tr>\n                      );\n                    })}\n                  </tbody>\n                </Table>\n              ) : (\n                <div className=\"text-center py-4\">\n                  <p className=\"text-muted\">No stock holdings yet.</p>\n                  <p>Start trading to build your portfolio!</p>\n                </div>\n              )}\n            </Card.Body>\n          </Card>\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default Portfolio; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}